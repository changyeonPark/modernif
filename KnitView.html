<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KNIT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js"
            integrity="sha512-uKQ39gEGiyUJl4AI6L+ekBdGKpGw4xJ55+xyJG7YFlJokPNYegn9KwQ3P8A7aFQAUtUsAQHep+d/lrGqrbPIDQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<link rel="stylesheet" href="resources/css/MainCss.css">

<body>

<div class="modal">
</div>

<div class="container">

    <nav class="navigator">

    </nav>

    <section class="section">

        <div class="section-title">
            <h2>KNIT</h2>
        </div>

        <div class="productList">
        </div>


    </section>

    <footer class="footer">

    </footer>

</div>

<script>
    const cardParent = document.querySelector(".productList")

    const product = JSON.parse(localStorage.getItem("product"))

    for (let i = 0; i < product.length; i++) {
        const prodNo = product[i].prodNo
        const prodName = product[i].prodName
        const prodPrice = product[i].prodPrice
        const prodCategory = product[i].prodCategory
        const mainImgUrl = product[i].mainImgUrl
        const prodSize = product[i].prodSize /* 2중 배열임 */
        const detailImgUrl = product[i].detailImgUrl /* 배열임 */
        const prodDelYn = product[i].prodDelYn

        if (prodCategory === "knit" && prodDelYn === "N"){
            const cardDiv = document.createElement("div")
            cardDiv.className = "card"

            const cardImgDiv = document.createElement("div")
            cardImgDiv.className = "card-img"

            const cardImgParentA = document.createElement("a")
            cardImgParentA.setAttribute("href", "ProductDetailView.html")

            const mainImg = document.createElement("img")
            mainImg.setAttribute("src", mainImgUrl)

            cardImgParentA.appendChild(mainImg)
            cardImgDiv.appendChild(cardImgParentA)

            const cardContent = document.createElement("div")
            cardContent.className = "card-content"

            const cardContentUl = document.createElement("ul")

            const prodNameUlLi = document.createElement("li")
            prodNameUlLi.className = "prod_name"

            const prodNameA = document.createElement("a")
            prodNameA.setAttribute("href", "ProductDetailView.html")

            const prodNameSpan = document.createElement("span")
            prodNameSpan.textContent = prodName

            prodNameA.appendChild(prodNameSpan)
            prodNameUlLi.appendChild(prodNameA)

            const prodPriceUlLi = document.createElement("li")
            prodPriceUlLi.className = "prod_price"

            prodPriceUlLi.textContent = "KRW " + prodPrice

            cardContentUl.append(prodNameUlLi, prodPriceUlLi)
            cardContent.append(cardContentUl)

            cardDiv.append(cardImgDiv, cardContent)

            cardParent.append(cardDiv)

            prodNameA.addEventListener("click", () => {

                sessionStorage.setItem("prodName", prodName)
            })

            cardImgParentA.addEventListener("click", () => {

                sessionStorage.setItem("prodName", prodName)
            })
        }
    }
</script>

<script src="resources/script/Navigator.js"></script>

<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<script src="resources/script/SearchRoad.js"></script>

</body>
</html>